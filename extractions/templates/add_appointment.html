<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Add Appointment</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
body {
  background: #eef2f7;
  color: #333;
}

header {
  background: #1e3a8a;
  color: white;
  padding: 40px 20px;
  text-align: center;
  font-size: 28px;
  font-weight: 600;
  box-shadow: 0 3px 8px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
@media (max-width: 650px) {
  header {
    padding: 60px 20px;
    font-size: 36px;
    line-height: 1.4;
  }
}


nav {
  background: #fff;
  padding: 15px;
  display: flex;
  gap: 25px;
  justify-content: center;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
nav a {
  text-decoration: none;
  color: #1e3a8a;
  font-weight: 500;
  padding: 6px 12px;
  border-radius: 5px;
  transition: 0.3s;
}
nav a:hover {
  background: #1e40af;
  color: white;
}
@media (max-width: 650px) {
  nav {
    flex-direction: column;
    gap: 10px;
    align-items: center;
  }
  nav a {
    width: 90%;
    text-align: center;
    border: 1px solid #1e3a8a;
  }
}


.container {
  max-width: 700px;
  margin: 40px auto;
  background: #fff;
  padding: 30px 40px;
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}
@media (max-width: 650px) {
  .container {
    margin: 20px;
    padding: 25px;
  }
}


form {
  display: flex;
  flex-direction: column;
  gap: 18px;
}
label {
  font-weight: 600;
  margin-bottom: 5px;
}
input, select, textarea {
  padding: 12px 15px;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  font-size: 16px;
  width: 100%;
  transition: 0.3s;
}
input:focus, select:focus, textarea:focus {
  border-color: #1e40af;
  outline: none;
  box-shadow: 0 0 8px rgba(30,64,175,0.2);
}
textarea {
  resize: vertical;
  min-height: 80px;
}


button {
  background: #1e3a8a;
  color: white;
  padding: 14px;
  font-size: 16px;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: #1e40af;
  transform: translateY(-2px);
}


#popupMessage {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 9999;
}
#popupMessage .message {
  background: #10b981;
  color: white;
  padding: 12px 20px;
  margin-bottom: 10px;
  border-radius: 6px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.2);
  animation: fadeinout 3s forwards;
}
#popupMessage .message.error {
  background: #ef4444;
}
@keyframes fadeinout {
  0% { opacity: 0; transform: translateY(-20px);}
  10%, 90% { opacity: 1; transform: translateY(0);}
  100% { opacity: 0; transform: translateY(-20px);}
}
</style>
</head>
<body>

<header>Add Appointment</header>

<nav>
  <a href="{% url 'dashboard' %}">Dashboard</a>
  <a href="{% url 'appointments' %}">Appointments</a>
  <a href="{% url 'add_patient' %}">Add Patient</a>
  <a href="/admin/logout/">Logout</a>
</nav>

<div class="container">
  <form method="POST">
    {% csrf_token %}

    <label for="patient">Patient Name</label>
    <input type="text" name="patient" id="patient" value="{{ request.POST.patient|default_if_none:'' }}" placeholder="Enter patient name" required>

    <label for="date">Date</label>
    <input type="date" name="date" id="date" value="{{ request.POST.date|default_if_none:'' }}" required>

    <label for="time">Time</label>
    <input type="time" name="time" id="time" value="{{ request.POST.time|default_if_none:'' }}" required>

    <label for="doctor">Doctor</label>
    <input type="text" name="doctor" id="doctor" value="{{ request.POST.doctor|default_if_none:'' }}" placeholder="Doctor Name" required>

    <label for="reason">Reason</label>
    <textarea name="reason" id="reason" rows="3" placeholder="Reason for appointment">{{ request.POST.reason|default_if_none:'' }}</textarea>

    <label for="status">Status</label>
    <select name="status" id="status">
      <option value="Scheduled" {% if request.POST.status == "Scheduled" %} selected {% endif %}>Scheduled</option>
      <option value="Completed" {% if request.POST.status == "Completed" %} selected {% endif %}>Completed</option>
      <option value="Cancelled" {% if request.POST.status == "Cancelled" %} selected {% endif %}>Cancelled</option>
    </select>

    <button type="submit">Add Appointment</button>
  </form>
</div>

<div id="popupMessage">
  {% if messages %}
    {% for message in messages %}
      <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
</div>

<script>
const popup = document.getElementById('popupMessage');
if (popup) {
  const messages = popup.querySelectorAll('.message');
  messages.forEach(msg => {
    msg.style.display = 'block';
    setTimeout(() => { msg.style.display = 'none'; }, 3000);
  });
}
</script>

</body>
</html>
